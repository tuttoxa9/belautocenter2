# üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∞–π—Ç–∞ –ë–µ–ª–∞–≤—Ç–æ –¶–µ–Ω—Ç—Ä

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ñ–∞–π–ª–æ–≤)
4. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
5. [–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π](#—Å–∏—Å—Ç–µ–º–∞-—Ö—Ä–∞–Ω–µ–Ω–∏—è-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
6. [–°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è](#—Å–∏—Å—Ç–µ–º–∞-–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è)
7. [API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#api-–∏-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
8. [–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ)
9. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
10. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–µ–∫–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (SSR) –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (SSG) –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Next.js App   ‚îÇ ‚Üê SSR/SSG
‚îÇ   (Frontend)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚ñº                  ‚ñº                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Firebase      ‚îÇ ‚îÇ  Cloudflare  ‚îÇ ‚îÇ   Cloudflare    ‚îÇ
‚îÇ   Firestore     ‚îÇ ‚îÇ     R2       ‚îÇ ‚îÇ   CDN Cache     ‚îÇ
‚îÇ   (Database)    ‚îÇ ‚îÇ  (Storage)   ‚îÇ ‚îÇ   (Images)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **Frontend (Next.js 14)**
   - React 18 —Å Server Components
   - App Router –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
   - TypeScript –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏

2. **Backend (Firebase)**
   - Firestore –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - Firebase Authentication –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - Firebase Storage (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

3. **CDN –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Cloudflare)**
   - R2 –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - Workers –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - CDN –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| Next.js | 14.2.x | React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å SSR/SSG |
| React | 18.3.x | UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| TypeScript | 5.x | –¢–∏–ø–∏–∑–∞—Ü–∏—è |
| Tailwind CSS | 3.4.x | CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| Bun | latest | Runtime –∏ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä |

### UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| shadcn/ui | –ù–∞–±–æ—Ä –≥–æ—Ç–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| Radix UI | –ü—Ä–∏–º–∏—Ç–∏–≤—ã –¥–ª—è UI |
| Lucide React | –ò–∫–æ–Ω–∫–∏ |
| React Hook Form | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞–º–∏ |
| React Dropzone | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ |

### Backend –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

| –°–µ—Ä–≤–∏—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------------|
| Firebase Firestore | NoSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| Firebase Auth | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| Cloudflare R2 | –•—Ä–∞–Ω–∏–ª–∏—â–µ –æ–±—ä–µ–∫—Ç–æ–≤ (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ) |
| Cloudflare Workers | Serverless —Ñ—É–Ω–∫—Ü–∏–∏ |
| Cloudflare CDN | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
belautocenter2/
‚îÇ
‚îú‚îÄ‚îÄ app/                          # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ about/                    # –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–û –Ω–∞—Å"
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ adminbel/                 # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ api/                      # API Routes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ catalog/                  # –ö–∞—Ç–∞–ª–æ–≥ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [id]/                 # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–æ—É—Ç –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–≤—Ç–æ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ contacts/                 # –ö–æ–Ω—Ç–∞–∫—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ credit/                   # –ö—Ä–µ–¥–∏—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ leasing/                  # –õ–∏–∑–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ privacy/                  # –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ reviews/                  # –û—Ç–∑—ã–≤—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                # –ö–æ—Ä–Ω–µ–≤–æ–π layout
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                  # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ globals.css               # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ robots.ts                 # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è robots.txt
‚îÇ
‚îú‚îÄ‚îÄ components/                   # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ admin/                    # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-about.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-cars.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-contacts.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-credit.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-leasing.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-privacy.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-reviews.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-settings.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-stories.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ image-upload.tsx      # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ ui/                       # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (shadcn/ui)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ card.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ car-card.tsx              # –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ footer.tsx                # –ü–æ–¥–≤–∞–ª —Å–∞–π—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ header.tsx                # –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ stories.tsx               # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å—Ç–æ—Ä–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ lib/                          # –£—Ç–∏–ª–∏—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ firebase.js               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
‚îÇ   ‚îú‚îÄ‚îÄ firebase-admin.ts         # Firebase Admin SDK
‚îÇ   ‚îú‚îÄ‚îÄ storage.ts                # –†–∞–±–æ—Ç–∞ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ image-cache.ts            # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ cache-invalidation.ts     # –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞
‚îÇ   ‚îú‚îÄ‚îÄ firestore-api.ts          # API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Firestore
‚îÇ   ‚îú‚îÄ‚îÄ firestore-cache.ts        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö Firestore
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts                  # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ hooks/                        # React —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ use-button-state.ts       # –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ use-firestore-cache.ts    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Firestore
‚îÇ   ‚îú‚îÄ‚îÄ use-mobile.tsx            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts              # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ public/                       # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ fonts/                    # –®—Ä–∏—Ñ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ logo.png                  # –õ–æ–≥–æ—Ç–∏–ø
‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico               # –ò–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ cloudflare-worker/            # Cloudflare Worker –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ image-cache-worker.js     # –ö–æ–¥ –≤–æ—Ä–∫–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ wrangler.toml             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–æ—Ä–∫–µ—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ seed-privacy.js           # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ seed-settings.js          # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ
‚îú‚îÄ‚îÄ .env.local                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ next.config.mjs               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js
‚îú‚îÄ‚îÄ tailwind.config.ts            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Tailwind
‚îú‚îÄ‚îÄ tsconfig.json                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
‚îú‚îÄ‚îÄ package.json                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### Firebase Firestore

Firestore ‚Äî —ç—Ç–æ NoSQL –¥–æ–∫—É–º–µ–Ω—Ç–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π

##### 1. –ö–æ–ª–ª–µ–∫—Ü–∏—è `cars` (–∞–≤—Ç–æ–º–æ–±–∏–ª–∏)

```typescript
interface Car {
  id: string                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π ID –¥–æ–∫—É–º–µ–Ω—Ç–∞
  make: string                  // –ú–∞—Ä–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Volkswagen")
  model: string                 // –ú–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Passat")
  year: number                  // –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞
  price: number                 // –¶–µ–Ω–∞ –≤ USD
  mileage: number               // –ü—Ä–æ–±–µ–≥ –≤ –∫–º
  engineVolume: number          // –û–±—ä—ë–º –¥–≤–∏–≥–∞—Ç–µ–ª—è –≤ –ª–∏—Ç—Ä–∞—Ö
  fuelType: string              // –¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞
  transmission: string          // –ö–æ—Ä–æ–±–∫–∞ –ø–µ—Ä–µ–¥–∞—á
  driveTrain: string            // –ü—Ä–∏–≤–æ–¥
  bodyType: string              // –¢–∏–ø –∫—É–∑–æ–≤–∞
  color: string                 // –¶–≤–µ—Ç
  description: string           // –û–ø–∏—Å–∞–Ω–∏–µ (Markdown)
  imageUrls: string[]           // –ú–∞—Å—Å–∏–≤ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  isAvailable: boolean          // –î–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏
  showOnHomepage: boolean       // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
  specifications: {             // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    [key: string]: string
  }
  features: string[]            // –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
  tiktok_url?: string           // –°—Å—ã–ª–∫–∞ –Ω–∞ TikTok
  youtube_url?: string          // –°—Å—ã–ª–∫–∞ –Ω–∞ YouTube
  createdAt: Timestamp          // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  updatedAt: Timestamp          // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `createdAt` (desc) ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–µ
- `price` (asc/desc) ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —Ü–µ–Ω–µ
- `year` (asc/desc) ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≥–æ–¥—É
- `isAvailable` + `showOnHomepage` ‚Äî –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

##### 2. –ö–æ–ª–ª–µ–∫—Ü–∏—è `stories` (–Ω–æ–≤–æ—Å—Ç–∏)

```typescript
interface Story {
  id: string
  mediaUrl: string              // URL –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞
  mediaType: "image" | "video"  // –¢–∏–ø –º–µ–¥–∏–∞
  caption: string               // –ó–∞–≥–æ–ª–æ–≤–æ–∫
  subtitle?: string             // –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫
  linkUrl?: string              // –°—Å—ã–ª–∫–∞
  avatarUrl?: string            // URL –∞–≤–∞—Ç–∞—Ä–∞
  order: number                 // –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  createdAt: Timestamp
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `order` (asc) ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

##### 3. –ö–æ–ª–ª–µ–∫—Ü–∏—è `reviews` (–æ—Ç–∑—ã–≤—ã)

```typescript
interface Review {
  id: string
  name: string                  // –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
  rating: number                // –û—Ü–µ–Ω–∫–∞ (1-5)
  text: string                  // –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞
  carModel?: string             // –ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è
  imageUrl?: string             // –§–æ—Ç–æ –∫–ª–∏–µ–Ω—Ç–∞
  status: "published" | "pending" | "rejected"
  createdAt: Timestamp
  updatedAt: Timestamp
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `createdAt` (desc) ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `status` ‚Äî –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

##### 4. –ö–æ–ª–ª–µ–∫—Ü–∏—è `settings` (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

–î–æ–∫—É–º–µ–Ω—Ç—ã –≤ —ç—Ç–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏:

**–î–æ–∫—É–º–µ–Ω—Ç `main`:**
```typescript
{
  companyName: string
  phone: string
  phone2?: string
  email: string
  address: string
  workingHours: string
  socialMedia: {
    instagram: string
    telegram: string
    avby: string
    tiktok: string
  }
  yandexMapsApiKey?: string
  showroomInfo: {
    title: string
    companyName: string
    address: string
    phone: string
    phone2?: string
    workingHours: {
      weekdays: string
    }
  }
}
```

**–î–æ–∫—É–º–µ–Ω—Ç `homepage`:**
```typescript
{
  heroTitle: string
  heroSubtitle: string
  heroBackgroundUrl: string
  advantagesTitle: string
  ctaTitle: string
  ctaSubtitle: string
}
```

**–î–æ–∫—É–º–µ–Ω—Ç `stories`:**
```typescript
{
  title: string
  subtitle: string
}
```

##### 5. –ö–æ–ª–ª–µ–∫—Ü–∏—è `pages` (—Å—Ç—Ä–∞–Ω–∏—Ü—ã)

–î–æ–∫—É–º–µ–Ω—Ç—ã: `about`, `credit`, `leasing`, `contacts`, `privacy`

**–î–æ–∫—É–º–µ–Ω—Ç `about`:**
```typescript
{
  title: string
  description: string
  team: Array<{
    name: string
    position: string
    description: string
    imageUrl: string
  }>
  achievements: Array<{
    number: string
    title: string
    description: string
  }>
}
```

**–î–æ–∫—É–º–µ–Ω—Ç `credit`:**
```typescript
{
  title: string
  subtitle: string
  description: string
  benefits: Array<{
    icon: string
    title: string
    description: string
  }>
  partners: Array<{
    name: string
    logoUrl: string
    minRate: number
    maxTerm: number
  }>
}
```

**–î–æ–∫—É–º–µ–Ω—Ç `contacts`:**
```typescript
{
  title: string
  description: string
  address: string
  phone: string
  phone2?: string
  email: string
  workingHours: string
  mapCoordinates: {
    lat: number
    lng: number
  }
  mapUrl: string
  socialMedia: {
    [key: string]: string
  }
}
```

---

## –°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### Cloudflare R2

R2 ‚Äî —ç—Ç–æ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç Cloudflare.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

```
bucket-name/
‚îú‚îÄ‚îÄ cars/                    # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ 1699123456789-vw-passat-1.webp
‚îÇ   ‚îú‚îÄ‚îÄ 1699123456790-vw-passat-2.webp
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ stories/                 # –ú–µ–¥–∏–∞ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ 1699123456791-story-1.webp
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ reviews/                 # –§–æ—Ç–æ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ logos/                   # –õ–æ–≥–æ—Ç–∏–ø—ã –±–∞–Ω–∫–æ–≤/–∫–æ–º–ø–∞–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ general/                 # –û–±—â–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ ...
```

#### –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

1. **–ö–ª–∏–µ–Ω—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ImageUpload`
2. **Frontend** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ `/upload` —Å —Ç–æ–∫–µ–Ω–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
3. **Cloudflare Worker** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Firebase
   - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–∞–π–ª (—Ä–∞–∑–º–µ—Ä, —Ç–∏–ø)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ WebP (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤ R2
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL —Ñ–∞–π–ª–∞
4. **Frontend** –ø–æ–ª—É—á–∞–µ—Ç URL –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Firestore

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

Cloudflare Worker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç JPG/PNG –≤ WebP
- –°–∂–∏–º–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤
- –î–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

#### API –∑–∞–≥—Ä—É–∑–∫–∏

**Endpoint:** `POST https://images.belautocenter.by/upload`

**Headers:**
```
Authorization: Bearer <firebase-token>
Content-Type: multipart/form-data
```

**Body (FormData):**
```
file: File
path: string (–Ω–∞–ø—Ä–∏–º–µ—Ä, "cars")
autoWebP: boolean (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
```

**Response:**
```json
{
  "success": true,
  "path": "https://images.belautocenter.by/cars/1699123456789-filename.webp",
  "uploadSessionId": "uuid",
  "originalType": "image/jpeg",
  "savedAs": "image/webp",
  "conversionResult": {
    "status": "SUCCESS",
    "reason": "Converted to WebP",
    "originalSize": 1024000,
    "convertedSize": 307200
  }
}
```

---

## –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Level 1: Browser Cache (Client-side)  ‚îÇ
‚îÇ  - Service Worker                       ‚îÇ
‚îÇ  - LocalStorage                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Level 2: CDN Cache (Cloudflare)       ‚îÇ
‚îÇ  - Edge Cache (–ø–æ –≤—Å–µ–º—É –º–∏—Ä—É)          ‚îÇ
‚îÇ  - TTL: 1 —á–∞—Å –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π          ‚îÇ
‚îÇ  - TTL: 5 –º–∏–Ω—É—Ç –¥–ª—è –¥–∞–Ω–Ω—ã—Ö             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Level 3: Application Cache (Next.js)  ‚îÇ
‚îÇ  - React Query Cache                    ‚îÇ
‚îÇ  - Next.js Data Cache                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏:

```typescript
// lib/cache-invalidation.ts
export const createCacheInvalidator = (resource: string) => ({
  onCreate: async (id: string) => {
    await purgeCache(`/${resource}`)
    await purgeCache(`/${resource}/${id}`)
  },
  onUpdate: async (id: string) => {
    await purgeCache(`/${resource}/${id}`)
  },
  onDelete: async (id: string) => {
    await purgeCache(`/${resource}`)
    await purgeCache(`/${resource}/${id}`)
  }
})
```

#### –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞

–ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à —Å–∞–π—Ç–∞" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç:

```typescript
// –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ –∫—ç—à–∞ Cloudflare
await fetch('https://images.belautocenter.by/purge-everything', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`
  }
})
```

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –°—Ç—Ä–∞—Ç–µ–≥–∏—è | TTL |
|------------|-----------|-----|
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | Cache-First | 1 —á–∞—Å |
| –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π | Stale-While-Revalidate | 5 –º–∏–Ω—É—Ç |
| –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≤—Ç–æ | Stale-While-Revalidate | 10 –º–∏–Ω—É—Ç |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | Stale-While-Revalidate | 1 —á–∞—Å |
| –û—Ç–∑—ã–≤—ã | Stale-While-Revalidate | 30 –º–∏–Ω—É—Ç |

---

## API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### Firebase API

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```typescript
// lib/firebase.js
import { initializeApp } from 'firebase/app'
import { getAuth } from 'firebase/auth'

const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,
  // ...
}

const app = initializeApp(firebaseConfig)
export const auth = getAuth(app)
```

#### Firestore

```typescript
import { getFirestore } from 'firebase/firestore'

export const db = getFirestore(app)
```

### Cloudflare Worker API

#### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```javascript
// cloudflare-worker/image-cache-worker.js

async function handleUpload(request, env) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  const token = request.headers.get('Authorization')
  const user = await verifyFirebaseToken(token)
  
  if (!user) {
    return new Response('Unauthorized', { status: 401 })
  }
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
  const formData = await request.formData()
  const file = formData.get('file')
  const path = formData.get('path')
  const autoWebP = formData.get('autoWebP') === 'true'
  
  // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP
  let finalFile = file
  if (autoWebP && shouldConvertToWebP(file.type)) {
    finalFile = await convertToWebP(file)
  }
  
  // –ó–∞–≥—Ä—É–∑–∫–∞ –≤ R2
  const key = `${path}/${Date.now()}-${file.name}`
  await env.R2_BUCKET.put(key, finalFile)
  
  // –í–æ–∑–≤—Ä–∞—Ç URL
  return new Response(JSON.stringify({
    success: true,
    path: `https://images.belautocenter.by/${key}`
  }))
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```javascript
async function handleImageRequest(request, env) {
  const url = new URL(request.url)
  const key = url.pathname.slice(1) // –£–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π —Å–ª—ç—à
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞
  const cache = caches.default
  let response = await cache.match(request)
  
  if (response) {
    return response
  }
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ R2
  const object = await env.R2_BUCKET.get(key)
  
  if (!object) {
    return new Response('Not Found', { status: 404 })
  }
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
  response = new Response(object.body, {
    headers: {
      'Content-Type': object.httpMetadata.contentType,
      'Cache-Control': 'public, max-age=3600',
      'CDN-Cache-Control': 'public, max-age=3600'
    }
  })
  
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
  await cache.put(request, response.clone())
  
  return response
}
```

### –í–Ω–µ—à–Ω–∏–µ API

#### –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
const YANDEX_MAPS_API_KEY = process.env.NEXT_PUBLIC_YANDEX_MAPS_API_KEY
```

---

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+ –∏–ª–∏ Bun
- Firebase –ø—Ä–æ–µ–∫—Ç
- Cloudflare –∞–∫–∫–∞—É–Ω—Ç (–¥–ª—è R2 –∏ Workers)
- Vercel –∞–∫–∫–∞—É–Ω—Ç (–¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–∞)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```env
# Firebase
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=your_measurement_id

# Cloudflare
NEXT_PUBLIC_IMAGE_HOST=https://images.belautocenter.by
NEXT_PUBLIC_API_HOST=https://images.belautocenter.by

# Site
NEXT_PUBLIC_SITE_URL=https://belautocenter.by
```

### –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Vercel

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Vercel:**
   ```bash
   vercel login
   vercel link
   ```

2. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Project Settings ‚Üí Environment Variables
   - –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.local`

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–±–æ—Ä–∫—É:**
   ```json
   {
     "framework": "nextjs",
     "buildCommand": "bun run build",
     "installCommand": "bun install",
     "outputDirectory": ".next"
   }
   ```

4. **–î–µ–ø–ª–æ–π:**
   ```bash
   vercel --prod
   ```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare Worker

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Wrangler CLI:**
   ```bash
   npm install -g wrangler
   ```

2. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å:**
   ```bash
   wrangler login
   ```

3. **–°–æ–∑–¥–∞–π—Ç–µ R2 bucket:**
   ```bash
   wrangler r2 bucket create belautocenter-images
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `wrangler.toml`:**
   ```toml
   name = "image-cache-worker"
   main = "cloudflare-worker/image-cache-worker.js"
   compatibility_date = "2024-01-01"
   
   [[r2_buckets]]
   binding = "R2_BUCKET"
   bucket_name = "belautocenter-images"
   ```

5. **–î–µ–ø–ª–æ–π –≤–æ—Ä–∫–µ—Ä–∞:**
   ```bash
   cd cloudflare-worker
   wrangler deploy
   ```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Firebase Console**

2. **–í–∫–ª—é—á–∏—Ç–µ Firestore:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Firestore Database
   - –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ production mode

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
   ```javascript
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       // –ü—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
       match /{document=**} {
         allow read: if true;
       }
       
       // –ó–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
       match /{document=**} {
         allow write: if request.auth != null;
       }
     }
   }
   ```

4. **–í–∫–ª—é—á–∏—Ç–µ Authentication:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Authentication
   - –í–∫–ª—é—á–∏—Ç–µ Email/Password –ø—Ä–æ–≤–∞–π–¥–µ—Ä
   - –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

5. **–°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã:**
   - Firestore –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–æ–∑–¥–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Firebase Authentication
- –¢–æ–∫–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (Cloudflare Worker)
- –°–µ—Å—Å–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ
- –ü—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

#### CSRF Protection
- Next.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç CSRF
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö

#### XSS Protection
- React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥
- Markdown —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É

#### SQL Injection
- –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è NoSQL)
- Firestore –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π

#### Rate Limiting
- Cloudflare –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç DDoS
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ Cloudflare

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ HTTPS
- Firebase —à–∏—Ñ—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–æ–∫–æ–µ
- R2 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP**
   - –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –Ω–∞ 30-70%
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤

2. **Lazy Loading**
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `loading="lazy"` –∞—Ç—Ä–∏–±—É—Ç

3. **Responsive Images**
   - –†–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `srcset` –∏ `sizes`

4. **CDN –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ edge —Å–µ—Ä–≤–µ—Ä–∞—Ö
   - –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∏–∑ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

1. **Code Splitting**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞ Next.js
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

2. **Tree Shaking**
   - –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞
   - –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ production

3. **Server Components**
   - –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –ú–µ–Ω—å—à–µ JavaScript –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

1. **Pagination**
   - –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
   - –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

2. **Selective Fetching**
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Firestore queries

3. **Caching Strategy**
   - –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - Stale-While-Revalidate

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª—å | –¢–µ–∫—É—â–µ–µ |
|---------|------|---------|
| First Contentful Paint (FCP) | < 1.8s | ~1.2s |
| Largest Contentful Paint (LCP) | < 2.5s | ~2.0s |
| Time to Interactive (TTI) | < 3.8s | ~2.5s |
| Cumulative Layout Shift (CLS) | < 0.1 | ~0.05 |
| Total Blocking Time (TBT) | < 200ms | ~150ms |

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Vercel Analytics** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Firebase Performance Monitoring** ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Firebase –æ–ø–µ—Ä–∞—Ü–∏–π
- **Cloudflare Analytics** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ CDN –∏ Workers

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/tuttoxa9/belautocenter2.git
   cd belautocenter2
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   bun install
   ```

3. **–°–æ–∑–¥–∞–π—Ç–µ `.env.local`:**
   ```bash
   cp .env.example .env.local
   # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   bun run dev
   ```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   ```
   http://localhost:3000
   ```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
bun run dev          # –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞

# –°–±–æ—Ä–∫–∞
bun run build        # Production —Å–±–æ—Ä–∫–∞
bun run start        # –ó–∞–ø—É—Å–∫ production —Å–µ—Ä–≤–µ—Ä–∞

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
bun run lint         # ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞
bun run type-check   # TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
bun run test         # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
```

### Git workflow

1. **–°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É:**
   ```bash
   git checkout -b feature/new-feature
   ```

2. **–í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ:**
   ```bash
   git add .
   git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
   ```

3. **–ó–∞–ø—É—à—å—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git push origin feature/new-feature
   ```

4. **–°–æ–∑–¥–∞–π—Ç–µ Pull Request**

### –°–æ–≥–ª–∞—à–µ–Ω–∏—è –æ –∫–æ–¥–µ

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TypeScript –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- –°–ª–µ–¥—É–π—Ç–µ ESLint –ø—Ä–∞–≤–∏–ª–∞–º
- –ü–∏—à–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ `components/ui` –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Cloudflare Worker —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `NEXT_PUBLIC_IMAGE_HOST`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ R2
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Cloudflare Dashboard

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Firestore

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Firestore
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Firebase Console ‚Üí Firestore ‚Üí Usage

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∞–π—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à Cloudflare
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Firestore
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Vercel Analytics –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–¥–∞–ª–∏—Ç–µ `node_modules` –∏ `.next`:
   ```bash
   rm -rf node_modules .next
   ```
2. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   bun install
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ `package.json`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

–î–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞.

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: –ù–æ—è–±—Ä—å 2024**
